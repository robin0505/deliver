<view class="container">
  <view class="logo-container">
    <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
    <text class="app-name">校园即时送</text>
  </view>
  
  <view class="login-container">
    <button 
      class="wechat-login-btn" 
      bindtap="handleWechatLogin"
      loading="{{loading}}"
      disabled="{{loading}}">
      <image class="wechat-icon" src="/images/wechat.png" mode="aspectFit"></image>
      微信一键登录
    </button>
    
    <!-- 添加测试模式切换按钮 -->
    <button 
      class="test-mode-btn" 
      bindtap="mockLogin"
      wx:if="{{isDevEnv}}">
      显示测试用户
    </button>
    
    <view class="login-tips">
      <text>登录即表示您同意</text>
      <text class="link">《用户协议》</text>
      <text>和</text>
      <text class="link">《隐私政策》</text>
    </view>
  </view>
  
  <!-- 测试账号登录选项，仅在开发环境显示 -->
  <view class="test-login" wx:if="{{showMultiUserLogin}}">
    <view class="divider">
      <text>测试账号登录</text>
    </view>
    <view class="test-users">
      <block wx:for="{{testUsers}}" wx:key="index">
        <view class="test-user" data-index="{{index}}" bindtap="selectTestUser">
          <view class="avatar-placeholder">{{item.name[0]}}</view>
          <text class="name">{{item.name}}</text>
        </view>
      </block>
    </view>
  </view>
  
  <!-- 添加调试信息帮助排查 -->
  <view class="debug-info" wx:if="{{isDevEnv}}">
    <view>showMultiUserLogin: {{showMultiUserLogin ? 'true' : 'false'}}</view>
    <view>testUsers长度: {{testUsers.length}}</view>
    <view wx:for="{{testUsers}}" wx:key="index">
      用户{{index+1}}: {{item.name}}
    </view>
  </view>
</view>